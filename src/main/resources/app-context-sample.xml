<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context-2.5.xsd">

	<context:annotation-config />

	<context:component-scan base-package="gr.ekt.oaicatbte" />


	<!-- ____________________________ BIBLIO TRANSFORMATION ENGINE ______________________________ -->

	<bean id="dataloader" class="gr.ekt.oai.DSpaceDataLoader" scope="prototype"/>

	<bean id="conjunctionTransformationWorkflow"
		class="gr.ekt.bte.core.LinearWorkflow" scope="prototype">
		<property name="process">
			<list>
				<ref bean="fix-metadata-language-modifier"/>
				<ref bean="fix-language-modifier"/>
				<ref bean="field-renamer-modifier"/>
				<ref bean="field-remover-modifier"/>
				<ref bean="date-modifier"/>
				<ref bean="fix-identifier-modifier"/>
			</list>
		</property>
	</bean>
		
	<bean id="fix-metadata-language-modifier" class="gr.ekt.oai.modifiers.FixMetadataLanguageModifier">
		<constructor-arg>
			<value>fix-metadata-language-modifier</value>
		</constructor-arg>
	</bean>
	
	<bean id="fix-language-modifier" class="gr.ekt.oai.modifiers.FixLanguageModifier">
		<constructor-arg>
			<value>fix-language-modifier</value>
		</constructor-arg>
	</bean>
	
	<bean id="field-remover-modifier" class="gr.ekt.oai.modifiers.FieldRemoverModifier">
		<constructor-arg>
			<value>field-remover-modifier</value>
		</constructor-arg>
		<property name="removals">
			<list>
				<value>dc.date.accessioned</value>
				<value>dc.date.available</value>
				<value>dc.date.issued</value>
				<value>dc.description</value>
				<value>dc.publisher</value>
				<value>dc.description.provenance</value>
				<value>dc.format.medium</value>
				<value>dc.format.extent</value>
				<value>dc.coverage.spatial</value>
				<value>dc.coverage.temporal</value>
				<value>dc.type</value>
				<value>dc.identifier</value>
				<value>dc.identifier.uri</value>
				<value>thesis.degree.grantor</value>
				<value>thesis.degree.discipline</value>
				<value>uketdterms.advisor</value>
				<value>hedi.country</value>
				<value>hedi.commiteemember</value>
				<value>hedi.researchinstitute</value>
				<value>hedi.blocked</value>
				<value>hedi.fulltext</value>
				<value>hedi.uri</value>
				<value>dc.contributor.committeemember</value>
				<value>dc.contributor.researchinstitute</value>
			</list>
		</property>
	</bean>
	
	<bean id="field-renamer-modifier" class="gr.ekt.oai.modifiers.FieldRenamerModifier">
		<constructor-arg>
			<value>field-renamer-modifier</value>
		</constructor-arg>
		<property name="renames">
			<map>
				<entry key="dc.title.alternative" value="dc.title"></entry>
				<entry key="uketdterms.institution" value="dc.publisher.inst"></entry>
			</map>
		</property>
	</bean>
	
	<bean id="date-modifier" class="gr.ekt.oai.modifiers.DateModifier">
		<constructor-arg>
			<value>date-modifier</value>
		</constructor-arg>
	</bean>
	
	<bean id="fix-identifier-modifier" class="gr.ekt.oai.modifiers.FixIdentifierModifier">
		<constructor-arg>
			<value>fix-identifier-modifier</value>
		</constructor-arg>
	</bean>
	
	
	<!-- ____________________________ CROSSWALKS ______________________________ -->
	
	<bean id="crosswalks" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="oai_dc" value-ref="oaidc-crosswalk"/>
				<entry key="raw" value-ref="raw-crosswalk"/>
			</map>
		</constructor-arg>
	</bean>
	
	<bean id="oaidc-crosswalk" class="gr.ekt.oai.OAIDCCrosswalk">
		<constructor-arg>
			<value>http://www.openarchives.org/OAI/2.0/oai_dc/ http://www.openarchives.org/OAI/2.0/oai_dc.xsd</value>
		</constructor-arg>
	</bean>
	
	<bean id="raw-crosswalk" class="gr.ekt.oai.RawCrosswalk">
		<constructor-arg>
			<value>http://www.loc.gov/MARC21/slim/ http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd</value>
		</constructor-arg>
	</bean>
	
	
	<!-- ____________________________ VIRTUAL SETS ______________________________ -->
	
	<bean id="virtual-sets" class="java.util.ArrayList">
		<constructor-arg>
			<list>
				<map>
					<entry key="name" value="dart" />
					<entry key="setSpec" value="dart" />
					<entry key="filters" value-ref="dart-filters"/>
				</map>
				<map>
					<entry key="name" value="voa3r" />
					<entry key="setSpec" value="voa3r" />
					<entry key="filters" value-ref="voa3r-filters" />
				</map>
			</list>
		</constructor-arg>
	</bean> 
	
	<bean id="dart-filters" class="java.util.ArrayList">
		<constructor-arg>
			<list>
				<ref bean="institution-filter"/>
				<ref bean="fulltext-filter"/>
				<ref bean="country-filter"/>
			</list>
		</constructor-arg>
	</bean>
	
		<bean id="institution-filter" class="gr.ekt.oai.filters.InstitutionFilter">
		<constructor-arg>
			<value>institution-filter</value>
		</constructor-arg>
	</bean>
	
	<bean id="fulltext-filter" class="gr.ekt.oai.filters.FullTextFilter">
		<constructor-arg>
			<value>fulltext-filter</value>
		</constructor-arg>
	</bean>
	
	<bean id="country-filter" class="gr.ekt.oai.filters.CountryFilter">
		<constructor-arg>
			<value>country-filter</value>
		</constructor-arg>
	</bean>
	
	<bean id="agricultural-discipline-filter" class="gr.ekt.oai.filters.AgriculturalDisciplineFilter">
		<constructor-arg>
			<value>agricultural-discipline-filter</value>
		</constructor-arg>
	</bean>
	
	<bean id="voa3r-filters" class="java.util.ArrayList">
		<constructor-arg>
			<list>
				<ref bean="agricultural-discipline-filter"/>
			</list>
		</constructor-arg>
	</bean>
	
	
	<!-- ____________________________ METADATA MAPPINGS ______________________________ -->
	
	<bean id="metadata-maps" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="creator" value-ref="creator-map"/>
				<entry key="mappings" value-ref="metadata-mappings"/>
			</map>
		</constructor-arg>
	</bean>
	
	<bean id="creator-map" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="name" value="Kostas Stamatis"/>
				<entry key="email" value="kstamatis@ekt.gr"/>
				<entry key="url" value="http://www.ekt.gr"/>
			</map>
		</constructor-arg>
	</bean>
	
	<bean id="metadata-mappings" class="java.util.ArrayList">
		<constructor-arg>
			<list>
				<ref bean="raw2html-mapping"/>
			</list>
		</constructor-arg>
	</bean>
	
	<bean id="raw2html-mapping" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="lastModified" value="2013-04-02T11:00:00"/>
				<entry key="xslt-url" value="http://devtom.ekt.gr:8889/marcss.xsl"/>
				<entry key="source" value-ref="raw2html-mapping-source"/>
				<entry key="target" value-ref="raw2html-mapping-target"/>
				<!--<entry key="additional-info" value-ref="raw2html-additional-info"/>-->
			</map>
		</constructor-arg>
	</bean>
	
	<bean id="raw2html-mapping-source" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="metadataPrefix" value="raw"/>
				<entry key="namespace" value="http://www.loc.gov/MARC21/slim"/>
				<entry key="schema" value="http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd"/>
			</map>
		</constructor-arg>
	</bean>
	
	<bean id="raw2html-mapping-target" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="metadataPrefix" value="html"/>
				<entry key="namespace" value="http://www.w3.org/1999/xhtml"/>
				<entry key="schema" value="http://www.w3.org/2002/08/xhtml/xhtml1-strict.xsd"/>
			</map>
		</constructor-arg>
	</bean>
	
	<bean id="raw2html-additional-info" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="description" value="This is a raw to html mapping using XSLT developed by EKT"/>
				<entry key="xsltArguments" value-ref="raw2html-arguments"/>
			</map>
		</constructor-arg>
	</bean>
	
	<bean id="raw2html-arguments" class="java.util.HashMap">
		<constructor-arg>
			<map>
				<entry key="arg1" value="test"/>
				<entry key="arg2" value="test"/>
			</map>
		</constructor-arg>
	</bean>
	
</beans>